# Task Management ツール設計書

## 概要
軽量でシンプルなタスク管理ツール。シェルスクリプトで動作し、Markdown風のデータ形式を採用。ID体系とインデントによる階層構造で視覚的に分かりやすく、変更履歴を追跡します。

## 1. データ形式 (`tasks`)

- **ファイル名**: `tasks` (拡張子なし)
- **保存場所**: `tasks/tasks`
- **構造**: 上部にタスク一覧、下部に詳細を分離
- **インデント**: 3マスでネスト表現

### 1.1 タスク一覧 (上部)
- **形式**: `進捗記号 ID タスク名`
  - **進捗記号**: `☑` (完了), `▣` (進行中), `□` (未着手)
  - **ID**: 4文字（例: `PA01`）
    - 1文字目: 親タスクの頭文字（例: `P`=Project, `R`=Realization）
    - 2文字目: ネスト深さ（`A`=1層, `B`=2層, `C`=3層, `D`=4層）
    - 3～4文字目: 連番（`01`～`99`、同一レベルで自動採番）
  - **タスク名**: 任意の文字列（スペース含む）

### 1.2 タスク詳細 (下部)
- **区切り文字**: `" : "` (コロン+前後スペース)
- **形式**: `ID: 内容 : 設計思想 : 懸念 : 実装結果 : 結果的懸念`
- **位置**: `# Details` マーカーの後

### 1.3 例
```
☑ PA01 新Webアプリ開発
   ▣ RB01 実装
      ▣ RC01 フロントエンド
         ☑ RD01 ログイン画面
         □ RD02 ダッシュボード
      ▣ RC02 緊急バグ修正

# Details
PA01: 新しいWebアプリをリリース : 未定 : スケジュール遅延リスク : 完了 : 
RB01: 主要機能の実装 : モジュラー設計 : チーム連携不足 : 進行中 : 
RC01: UIコンポーネント開発 : レスポンシブ重視 : ブラウザ互換性 : 進行中 : 
RD01: 認証UI/API連携 : シンプル直感的 : セキュリティ : Reactで実装完了 : セッション管理
RD02: データ可視化UI : データ駆動設計 : ライブラリ選定 : 未着手 : 
RC02: ログイン修正 : 迅速対応 : 再発防止策 : 進行中 : 
```

## 2. コマンド仕様

### 2.1 基本コマンド
1. **`init`**: タスクファイル初期化
2. **`add <parent> <name> <status> [content] [design]`**: タスク追加
3. **`update <parent> <name> <status>`**: タスク状態更新
4. **`update-detail <id> <field> <value>`**: タスク詳細更新
5. **`delete <id>`**: タスク削除
6. **`list [id] [--status <status>]`**: タスク一覧表示
7. **`help`**: ヘルプ表示

### 2.2 オプション設定
- **デバッグモード**: `-v`または`--verbose`フラグで詳細ログ出力

## 3. 実装詳細

### 3.1 エラー処理
- 各コマンドで入力バリデーション実施
- エラーメッセージの標準化と終了コード設定
- ファイル存在チェックの共通関数化

### 3.2 ID生成ロジック
- 同一レベルでの連番方式（既存の最大ID+1）
- 4層以上のネストは警告表示（Dレベルとして扱う）

### 3.3 セキュリティ考慮
- 入力値のサニタイズ処理
- ファイルパーミッションの適切な管理 